<?php
/**
 * Product view template
 *
 * @see Mage_Catalog_Block_Product_View
 * @see Mage_Review_Block_Product_View
 */
 
$_helper = $this->helper('catalog/output');
$_product = $this->getProduct(); 
$freeProdSku = array('fr','fb','fe','fp');
$strLowerFreeProd = strtolower(substr($_product->getSku(), 0, 2));
$userAgent = Mage::getUserAgent();
if($userAgent['browser_name'] == 'msie'): ?>
	<style>.quickview{display:none;}</style>
<?php 
endif;
$currentCountryCode = Mage::getModel('countrymapping/country')->getCountryParamCode();?>
<script type="text/javascript">
	var optionsPrice = new Product.OptionsPrice(<?php echo $this->getJsonConfig();?>);
</script>
<script type="text/javascript">
var RingSizeTrio = function(cl,id,name,change){
jQuery(cl)
	.append(
		jQuery('<select title="Ring Size" class="required-entry" id='+id+' name='+name+' onchange='+change+'><option value=""><?php if(!strstr($_SERVER['HTTP_USER_AGENT'],'iPad')){ ?>Select<?php } ?> Ring Size</option><option value="3">3</option><option value="3.5">3.5</option><option value="4">4</option><option value="4.5">4.5</option><option value="5">5</option><option value="5.5">5.5</option><option value="6">6</option><option value="6.5">6.5</option><option value="7">7</option><option value="7.5">7.5</option><option value="8">8</option><option value="8.5">8.5</option><option value="9">9</option><option value="9.5">9.5</option><option value="10">10</option><option value="10.5">10.5</option><option value="11">11</option><option value="11.5">11.5</option><option value="12">12</option><option value="12.5">12.5</option><option value="13">13</option></select>')
	)
};
jQuery(function(){
	RingSizeTrio(".t1","trioRing1","trioRing1","trioRingSize1()");
	RingSizeTrio(".t2","trioRing2","trioRing2","trioRingSize2()");
	RingSizeTrio(".t3","trioRing3","trioRing3","trioRingSize3()");
});
</script>
<?php 
if(!$_product->IsConfigurable()){?>
	<script type="text/javascript">
		jQuery(function(){
			specialOfferPrice();
		});
	</script>
<?php 
}
// added to change description & name on load
$metal = $this->getRequest()->getParam('metal1_type');
$stone = $this->getRequest()->getParam('stone1_grade');

if($metal || $stone){?>
<script type="text/javascript">
	jQuery(function(){
		var categoryIds = '<?php echo implode(',', $_product->getCategoryIds()); ?>';
		updateDescriptionName(categoryIds);
	});
</script>
<?php	
}

if($_product->getIsBuildYourOwn() && $_product->getByoModel()->hasSettingSelected()){ ?>
	<style>
		.price-hlder{height:0px; overflow:hidden}
		.price-hlder .price-box, .price-hlder #view-sp-offers{display:none}
	</style>
<?php } ?>
<div class="normal-pro-container container showcase-bg-white min-padding-top relative-placeholder <?php if($_product->getIsBuildYourOwn()):?>design-your-own<?php endif;?><?php if(in_array(470, $_product->getCategoryIds())){?> dyo-ring<?php }else if(in_array(469, $_product->getCategoryIds())){?> dyo-pendant<?php }?>" itemscope itemtype="http://schema.org/Product">                    
    <div id="messages_product_view"><?php echo $this->getMessagesBlock()->getGroupedHtml(); ?></div>
	<div class="product-view">
		<div class="product-essential" <?php if($_product->getIsBuildYourOwn()){echo 'style="width:100%!important"';} ?>>
					<?php // specific for build your own header
					if($_product->getIsBuildYourOwn()){
						echo $this->getLayout()->createBlock('buildyourown/header')->setTemplate('buildyourown/header.phtml')->toHTML();
					} ?>
					<div class="clearfix"></div>
					
					<?php /* Code for Notify me Out of Stock */ ?>
					<?php /* Asheesh:Start */ ?>
					<?php $_storeId = Mage::app()->getStore()->getId(); ?>
					<?php $_isActive = Mage::getStoreConfig('outofstocksubscription/mail/active', $_storeId); ?>
					<?php if(!$_product->isSaleable() && $_isActive): ?>
						<?php $_url = $this->getUrl('outofstocksubscription') ?>
					<?php else: ?>
						<?php $_url = $this->getSubmitUrl($_product); ?>
					<?php endif; ?>
					<?php /* Asheesh:End */ ?>
					
					<form autocomplete="off" action="<?php echo $_url ?>" method="post" class="product-form" id="product_addtocart_form"<?php if($_product->getOptions()): ?> enctype="multipart/form-data"<?php endif; ?>>
						
						<div class="product-name-rating max-low-margin-bottom high-padding-bottom">
							<h1 class="product-name dyn_short_description" itemprop="name">
								<?php echo $_helper->productAttribute($_product,$_product->getShortDescription(),'name');?>
							</h1>
							<div class="clearfix"></div>
							<div class="product-rating">
								<?php echo $this->getReviewsSummaryHtml($_product, false, true); echo $this->getChildHtml('alert_urls'); ?>
							</div>
						</div>
						<div class="clearfix"></div>
						
						<div class="product-image relative-placeholder">
							<?php echo $this->getChildHtml('media'); ?>
						</div>													
						<div class="clearfix"></div>	
						
						<?php /* S: Share code */ ?>
						<div class="social-media-icons p10 full-width">
							<?php
							if($_product->getAttributeText('jewelry_type') == 'Earrings'){
								$socialUrlParamPin = 'Make a statement with these elegant '.$_product->getShortDescription().' from Angara.com. Explore a fascinating array of designs';
							}
							else{	
								$socialUrlParamPin = 'Make a statement with this '.$_product->getShortDescription().' from Angara.com. Explore a fascinating array of designs';
							}	
							$socialUrlParamTweet = $_product->getShortDescription().' at Angara.com&via=Angara'; ?>
							<div class="align-social-icons">
								<div class="i-holder pull-left"><i class="fbShare fa fa-facebook px22 high-margin-right clickable" onclick="myFbFunction()"></i></div>
								<?php /* <div class="i-holder pull-left"><i class="googleShare fa fa-google-plus px22 high-margin-right clickable" onclick="myGoogleFunction()"></i></div> */ ?>
								<div class="i-holder pull-left"><i class="pinShare fa fa-pinterest px22 high-margin-right clickable" onclick="myPinFunction()"></i></div>
								<div class="i-holder pull-left"><i class="tweetShare fa fa-twitter px22 high-margin-right clickable" onclick="myTweetFunction()"></i></div>
								<div class="i-holder pull-left"><i class="fl emailShare fa fa-envelope-o clickable" style="font-size:19px;" onclick="myEmailFunction();"></i></div>
								<div class="i-holder pull-left" style="margin-left:10px;">
									<?php if($this->helper('wishlist')->isAllow() && !$_product->getIsBuildYourOwn() && !in_array($strLowerFreeProd, $freeProdSku)){
										echo $this->getChildHtml('addto');
									} ?>	
								</div>
							</div>
							<script type="text/javascript">						
							function myPinFunction(){
								var url = jQuery('#image').attr('src');
								window.open("https://pinterest.com/pin/create/bookmarklet/?media="+url+"&url=<?php echo $_product->getProductUrl()."?cid=sm-pin-organic-website&resetChannel=true&description=".urlencode($socialUrlParamPin);?>",'pin','height=600,width=650').focus();	
							}
							function myGoogleFunction(){							
								window.open('https://plus.google.com/share?url=<?php echo urlencode($_product->getProductUrl());?>','gplus','height=600,width=650').focus();	
							}
							function myEmailFunction(){
								jQuery('#emailModal').modal({remote: '<?php echo $this->helper('catalog/product')->getEmailToFriendUrl($_product) ?>'});
								jQuery('#emailModal').css({"overflow-y": "hidden"});
							}	
							function myFbFunction(){							
								window.open('https://www.facebook.com/share.php?u=<?php echo $_product->getProductUrl().'?cid=sm-fb-organic-website&amp;resetChannel=true';?>','face','height=600,width=650').focus();
							}
							function myTweetFunction(){							
								window.open("https://twitter.com/intent/tweet?url=<?php echo Mage::helper('utilitybackend/shortner')->shorten($_product->getProductUrl()."?cid=sm-tweet-organic-website&resetChannel=true");?>&text=<?php echo $socialUrlParamTweet;?>",'tweet','height=600,width=650').focus();	
							}
							</script>
						</div>
						<div class="clearfix"></div>
						<?php /* E: Share code */ ?>
						
						<div class="add-to-cart-container">
							<div class="col-sm-12 add-to-cart-container-box  <?php if(!$_product->isSaleable() && $_isActive){ echo 'notify-me-box'; } ?> padding-type-10" style="padding-top:0px;">
								<div class="col-sm-12 no-padding price-holder main-price">
									<div class="no-display">
										<input type="hidden" name="product" value="<?php echo $_product->getId(); ?>" />
										<input type="hidden" name="related_product" id="related-products-field" value="" />													
									</div>      
									<div class="product-type-data">
										<?php echo $this->getChildHtml('product_type_data'); ?>
									</div>
									<?php
									echo $this->getTierPriceHtml();
									echo $this->getChildHtml('extrahint'); ?> 		
								</div>
								
								<?php if($this->hasOptions()): 	?>
									<div class="customize-option-holder col-sm-12">
										<div class="pro-options" <?php echo $this->canShowOptionBoxBorder();?>>
											<?php echo $this->getChildChildHtml('container2', '', true, true); ?> 
										</div> 
									</div>
								<?php endif; ?>
								
								<?php // S:VA Ring size placeholder ?>
								<?php if(!$_product->getIsBuildYourOwn()){ ?>
									<div id="product_options_ring_size"></div>
									<div class="clearfix"></div>
								<?php } ?>

								<?php // S:RV TRIO ?>
								<?php if(Mage::registry('current_product')->getTrioSku()){ ?>
									<style>
										.trio-ring-sizes{
											width: 100%;
											float: left;
										}
										.trio-ring-sizes .customize-btn-title{
											padding:0px;
										}
										.trio-ring-sizes .customize-btn-title .select{
										}
										.trio-ring-sizes .customize-btn-title .title{
										}
										.trio-ring-sizes .select-ring-sizes{
											padding: 0px 20px 0px 5px;
											border: 1px solid #000000;
											line-height: 40px;
											width: 206px;
											margin-right: 10px;
											position:relative;
										}
										.trio-ring-sizes .select-ring-sizes:after{
											content: "";
											border-top: 7px solid #000000;
											border-bottom: 5px solid transparent;
											border-left: 4px solid transparent;
											border-right: 4px solid transparent;
											right: 7px;
											position: absolute;
											top: 17px;
										}
										.trio-ring-sizes .ring-size-guide a{
											font-size:12px;
											color:#999999;
										}
										.trio-ring-sizes .ring-size-guide a span{
											display:block;
											width:100%;
										}
										.trio-box{
											float: left;
											border: 1px solid #dedede;
											border-bottom: none;
											margin-top: 15px;
											max-width: 428px;
										}
										.trio-product li{
											width: 100%;
											float: left;
											padding: 10px;
											border-bottom: 1px solid #dedede;
											padding:10px 10px 10px 120px;
										}
										.trio-product li .left-box{
											width:90px;
											left:10px;
											top:10px;
										}
										.trio-product li .right-box{
											width:100%;
											min-height:110px;
										}
										.trio-product li .right-box h2{
											margin: 0px;
											text-overflow: ellipsis;
											white-space: nowrap;
											overflow: hidden;
											font-weight: 500;
											font-size: 14px;
										}
										.trio-product li .right-box .trio-price-box{
											padding:5px 0px;
										}
										.trio-product li .right-box .trio-price-box .regular-price{
											color:#fa505a;
											font-weight:500;
										}
										.trio-product li .right-box .trio-price-box .traditional-price{
											font-size:12px;
											color:#999999;
										}
										.trio-product li .right-box .trio-ring-size{
											position: relative;
										}
										.trio-ring-size select{
										    height: 35px;
											border: 1px solid #000000;
											min-width: 200px;
										}
										.trio-ring-size .validation-advice{
											font-size:12px;
											position: absolute;
											bottom: -17px;
										}
										@media (max-width:768px){
											.trio-box{
												max-width:355px !important;
											}
										}
									</style>
									<script>
										function showTrio(e){
											if(e == 'add-to-cart'){
												var obj = jQuery('.trio-ring-sizes');
												if(obj){
													var pos = obj.offset().top - 100;
													jQuery('html, body').animate({scrollTop: pos}, 500);
												}
											}
											jQuery('.trio-box').addClass('active').show(0);
											var formHeight = jQuery('.add-to-cart-container').height();
											if(jQuery(window).width() <= 768){
												var tHeight = jQuery('.product-name-rating').height();
												formHeight = formHeight + tHeight;
												jQuery('.add-to-cart-container').css('top',tHeight+'px');
											}else{
												jQuery('.add-to-cart-container').css('top','0px');
											}
											jQuery('.product-form').css('min-height',formHeight+'px');
											jQuery('.trio-box').css('opacity','1');
										}
										function hideTrio(){
											jQuery('.trio-box').hide(0);
											var formHeight = jQuery('.add-to-cart-container').height();
											if(jQuery(window).width() <= 768){
												var tHeight = jQuery('.product-name-rating').height();
												formHeight = formHeight + tHeight;
												jQuery('.add-to-cart-container').css('top',tHeight+'px');
											}else{
												jQuery('.add-to-cart-container').css('top','0px');
											}
											jQuery('.product-form').css('min-height',formHeight+'px');
											jQuery('.trio-box').css('opacity','0');
										}
									</script>
									<div class="trio-ring-sizes">
										<div class="customize-btn-title pull-left">
											<span class="select">Select</span>
											<span class="title">Ring Sizes</span>
										</div>
										<div class="select-ring-sizes pull-left" onclick="showTrio();">
											Select Ring Sizes
										</div>
										<div class="ring-size-guide pull-left">
											<a href="/skin/frontend/angara/default/PDF/AngaraRingSizer00.pdf" target="_blank"><span>Ring</span> <span>Size Guide</span></a>
										</div>
									</div>
									<div class="trio-box" style="display:none; opacity:0">
										<ul id="trios" class="trio-product">
											<?php 
											$skus=Mage::registry('current_product')->getTrioSku();
											$curr_product_sku=Mage::registry('current_product')->getSku();
											$curr_product_id = Mage::getModel('catalog/product')->getIdBySku($curr_product_sku);
											$curr_product = Mage::getModel('catalog/product')->load($curr_product_id);
											$custom_options=array();
											$custom_options_sku=array();
											foreach ($curr_product->getOptions() as $o) {
												$custom_options[]=$o->getId();
												$custom_options_sku[]=$o->getSku();
											}
											$ids = explode('|', $skus);
											?>


											<?php
											if($skus){
												$block = new Mage_Review_Block_Helper();
												$url =  Mage::getModel('catalog/product')->loadByAttribute('sku',$ids[0])->getProductUrl();
												$product_id = Mage::getModel('catalog/product')->getIdBySku($ids[0]); 
												$trio1_product = Mage::getModel('catalog/product')->load($product_id);					
												?>
												<li class="relative-placeholder">
													<div class="left-box absolute-placeholder">
														<img id="trio1" class="img-responsive" src="" alt="">
														<a href="">Product Detail</a>
													</div>
													<div class="right-box pull-left">
														<h2 id="name1"></h2>
														<?php echo $block->getSummaryHtml($trio1_product); ?>
														<div class="clearfix"></div>
														<div class="trio-price-box price-box">
															<span id="price1" class="col-sm-12 no-padding regular-price block-inline-display"></span>
															<span id="price_trad1" class="col-sm-12 no-padding traditional-price block-inline-display"></span>
														</div>
														<div class="clearfix"></div>
														<div class="trio-ring-size ring-size">
															<div class="t1"></div>
														</div>
													</div>
												</li>
												
												<?php
												$url =  Mage::getModel('catalog/product')->loadByAttribute('sku',$ids[1])->getProductUrl();
												$product_id = Mage::getModel('catalog/product')->getIdBySku($ids[1]);
												$trio2_product = Mage::getModel('catalog/product')->load($product_id);
												?>
												<li class="relative-placeholder">
													<div class="left-box absolute-placeholder">
														<img id="trio2" class="img-responsive" src="" alt="">
														<a href="">Product Detail</a>
													</div>
													<div class="right-box pull-left">
														<h2 id="name2"></h2>
														<?php echo $block->getSummaryHtml($trio2_product); ?>
														<div class="clearfix"></div>
														<div class="trio-price-box price-box">
															<span id="price2" class="col-sm-12 no-padding regular-price block-inline-display"></span>
															<span id="price_trad2" class="col-sm-12 no-padding traditional-price block-inline-display"></span>
														</div>
														<div class="clearfix"></div>
														<div class="trio-ring-size ring-size">
															<div class="t2"></div>
														</div>
													</div>
												</li>

												<?php
												$url =  Mage::getModel('catalog/product')->loadByAttribute('sku',$ids[2])->getProductUrl();
												$product_id = Mage::getModel('catalog/product')->getIdBySku($ids[2]);
												$trio3_product = Mage::getModel('catalog/product')->load($product_id);
												?>
												<li class="relative-placeholder">
													<div class="left-box absolute-placeholder">
														<img id="trio3" class="img-responsive" src="" alt="">
														<a href="">Product Detail</a>
													</div>
													<div class="right-box pull-left">
														<h2 id="name3"></h2>
														<?php echo $block->getSummaryHtml($trio3_product); ?>
														<div class="clearfix"></div>
														<div class="trio-price-box price-box">
															<span id="price3" class="col-sm-12 no-padding regular-price block-inline-display"></span>
															<span id="price_trad3" class="col-sm-12 no-padding traditional-price block-inline-display"></span>
														</div>
														<div class="clearfix"></div>
														<div class="trio-ring-size ring-size">
															<div class="t3"></div>
														</div>
													</div>
												</li>
											<?php } ?>								
										</ul>
										<script>
										/* Trio */
										jQuery(document).click(function(e){
											if (!jQuery(e.target).closest('.trio-box').length && !jQuery(e.target).closest('.trio-ring-sizes').length && !jQuery(e.target).closest('#addtocart-btn').length) {		//	find if we have a class
												hideTrio();
											}
										});

										if(Prototype.Browser.IE){}else{
										jQuery(window).load(function(){
										setTimeout(function(){
										$('trioRing1').observe('blur',function(e){
										Validation.validate($('trioRing1'))
										});
										$('trioRing1').observe('change',function(e){
										Validation.validate($('trioRing1'))
										});
										$('trioRing2').observe('blur', function(e){
										Validation.validate($('trioRing2'))
										});
										$('trioRing2').observe('change',function(e){
										Validation.validate($('trioRing2'))
										});
										$('trioRing3').observe('blur', function(e){
										Validation.validate($('trioRing3'))
										});
										$('trioRing3').observe('change',function(e){
										Validation.validate($('trioRing3'))
										});},1000);
										});
										}
										function trioRingSize1() {
										var x = document.getElementById("trioRing1").value;
										document.getElementById("options_<?php echo $custom_options[0];?>_text").value = x;

										}
										function trioRingSize2() {
										var x = document.getElementById("trioRing2").value;
										document.getElementById("options_<?php echo $custom_options[2];?>_text").value = x;

										}
										function trioRingSize3() {
										var x = document.getElementById("trioRing3").value;
										document.getElementById("options_<?php echo $custom_options[4];?>_text").value = x;

										}
										</script>
									</div>
									<div class="clearfix"></div>
								<?php } ?>
								

								<?php 
								if(!in_array($strLowerFreeProd, $freeProdSku)){?>
								<div class="add-to-cart-btn-holder">
									<div class="add-to-box high-padding-top text-left">
									<?php /* Code for Notify me Out of Stock */ ?>
									<?php /* Bypass the saleable check if Out of stock notify feature is enable. */ ?>
									<?php /* Asheesh:Start */ ?>
									<?php if($_isActive || $_product->isSaleable()){ ?>
									<?php /* Asheesh:End */ ?>
									<?php	echo $this->getChildHtml('addtocart'); ?> 
										<script type="text/javascript">
										//<![CDATA[
										var productAddToCartForm = new VarienForm('product_addtocart_form');
										productAddToCartForm.submit = function(button, url) {
											
											<?php if(Mage::registry('current_product')->getTrioSku()){ ?>
												var validt = false;
												var isTrioprod = jQuery('#trioRing1').length;
												if(isTrioprod){
													validt = (jQuery('#trioRing1').hasClass('validation-failed') && jQuery('#trioRing1')=='') || (jQuery('#trioRing2').hasClass('validation-failed') && jQuery('#trioRing2')=='') || (jQuery('#trioRing3').hasClass('validation-failed') && jQuery('#trioRing3')=='');
													isvalid = false;
													if(validt) {
														showTrio('add-to-cart');
														isvalid = this.validator.validate();												
														
														if(isvalid == false){
															showTrio('add-to-cart');
														}else{
															hideTrio();
														}

													}else{
														showTrio('add-to-cart');
														isvalid = this.validator.validate();												
														
														if(isvalid == false){
															showTrio('add-to-cart');
														}else{
															hideTrio();
														}

														if(jQuery('#add-cart-stopper').length == 1){
															jQuery('#add-cart-stopper-msg').removeClass('hidden');
														}
														else{
															jQuery('#add-cart-stopper-msg').remove();
														}
													}
													if(isvalid) {
														var form = this.form;
														var oldUrl = form.action;
										
														if (url) {
														   form.action = url;
														}
														var e = null;
														try {
																jQuery('#add-cart-wait').removeClass('hide');
																jQuery('.add-to-cart button').attr('disabled','disabled');
																setTimeout(function(){form.submit();}, 1);
														} catch (e) {
														}
														this.form.action = oldUrl;
														if (e) {
															throw e;
														}
													}
												} 
											<?php } else { ?>
												if (this.validator.validate()) {
													
													var form = this.form;
													var oldUrl = form.action;
									
													if (url) {
													   form.action = url;
													}
													var e = null;
													try {
															jQuery('#add-cart-wait').removeClass('hide');
															jQuery('.add-to-cart button').attr('disabled','disabled');
															setTimeout(function(){form.submit();}, 1);
													} catch (e) {
													}
													this.form.action = oldUrl;
													if (e) {
														throw e;
													}
												} else {
													//open trio rings size box on add to cart

													if(jQuery('#add-cart-stopper').length == 1){
														jQuery('#add-cart-stopper-msg').removeClass('hidden');
													}
													else{
														jQuery('#add-cart-stopper-msg').remove();
													}
												}
											<?php } ?>
											
										}.bind(productAddToCartForm);
								
										productAddToCartForm.submitLight = function(button, url){
											if(this.validator) {
												var nv = Validation.methods;
												delete Validation.methods['required-entry'];
												delete Validation.methods['validate-one-required'];
												delete Validation.methods['validate-one-required-by-name'];
												// Remove custom datetime validators
												for (var methodName in Validation.methods) {
													if (methodName.match(/^validate-datetime-.*/i)) {
														delete Validation.methods[methodName];
													}
												}
								
												if (this.validator.validate()) {
													if (url) {
														this.form.action = url;
													}
													this.form.submit();
												}
												Object.extend(Validation.methods, nv);
											}
										}.bind(productAddToCartForm);
										
										//]]>
										</script>
									<?php 
									}else{ ?>
										<div class="row">
											<div class="col-sm-12 no-padding fontsize-type0 text-bold text-green low-padding-top high-padding-left high-padding-right">
												<span>We can customize this item for you. For further assistance, give us a call on 1-888-926-4272 or <a rel="nofollow" id="_lpChatBtn" href='javascript:;' target='chat609151' onClick="javascript:window.open('https://server.iad.liveperson.net/hc/609151/?cmd=file&file=visitorWantsToChat&site=609151&imageUrl=https://server.iad.liveperson.nethttp://www.angara.comhttp://www.angara.com/store/images/lp/&referrer='+escape(document.location),'chat609151','width=475,height=400,resizable=yes');return false;" class="text-green text-underline live-chat-link">click here</a> to chat.</span>
											</div>
										</div>
										<div class="row">
											<div class="col-sm-12 no-padding">
												<div class="add-to-cart">
													<button type="button" title="Sold Out" disabled="disabled" class="btn btn-cart add-to-cart btn-primary btn-block fontsize-type5 no-shadow" ><i class="fa fa-shopping-cart low-padding-right"></i> Sold Out</button>
												</div>
											</div>
										</div>
									<?php } ?>
									</div>	
							
									<div class="clearfix"></div>
									<?php if(!in_array(96, $_product->getCategoryIds())): ?>
										<?php if($_product->isSaleable()){?>
											<div class="estimated-arrival-date pull-left text-left">
												<span class="col-sm-12 no-padding display-inline-block"><span class="">Want it by</span> <span class="dyn_arrive_lead_time apricot-text"><i class="fa fa-spinner fa-spin"></i></span></span> <i class="fa fa-question-circle clickable" data-html="true" data-placement="left" data-trigger="click" data-toggle="tooltip" title="Every Angara item is custom made-to-order after your order is placed. The Estimated Arrival date is calculated based on the production time of your item." ></i>
												<div class="clearfix"></div>
												<span class="col-sm-12 no-padding display-inline-block">Select Priority Overnight Shipping at Checkout</span>
											</div>
										<?php } ?>
									<?php endif; ?>
									
									<div class="product-page-usp desktop text-left full-width max-low-padding-top">
										<div class="usp-near-add-to-cart fontsize-type3">
											<div class="col-sm-4 no-padding">
												<span data-html="true" data-placement="left" data-trigger="hover" data-toggle="tooltip" title="Free Shipping and Free Return Shipping within the USA.">
													<img alt="Free Shipping Worldwide" style="margin-top:-4px" width="20" src="/skin/frontend/ress/default/images/freeshipping.png">
													<span style="display:inline-block">Free Shipping</span>
												</span>
											</div>
											<div class="col-sm-4 no-padding">
												<span data-html="true" data-placement="left" data-trigger="hover" data-toggle="tooltip" title="If you don't like the product, simply send it back to us within <?php echo Mage::helper('function')->freeReturnDays();?> days and get a 100% refund. We will even email you a FREE return shipping label (for domestic orders).">	
													<img alt="<?php echo Mage::helper('function')->freeReturnDays();?> Day Return" style="margin-top:-4px" width="20" src="/skin/frontend/ress/default/images/30dayreturn.png">
													<span style="display:inline-block">Free <?php echo Mage::helper('function')->freeReturnDays();?> Day Return</span>
												</span>
											</div>
											<div class="col-sm-4 no-padding">
												<span data-html="true" data-placement="left" data-trigger="hover" data-toggle="tooltip" title="We will refund up to 110% of the purchase price, if any accredited jewelry appraiser values your piece for less than 125% of the purchase price.">
													<img alt="110% Refund Policy" style="margin-top:-4px" width="20" src="/skin/frontend/ress/default/images/110refund.png">
													<span style="display:inline-block">110% Refund Policy</span>
												</span>
											</div>
										</div>
									</div>
								</div>
								<?php 
								}
								else{?>
									<div class="apricot-text max-padding-bottom max-padding-top px22">Free with Purchase</div>
									<div class="max-padding-bottom text-light">In the event you return qualifying item(s), please be sure to include the free gift(s) with the return for a full refund and in the state that they were shipped. If you would like to keep the free gift(s) but not the qualifying item(s), you will be charged for the retail value of the free gift(s).</div>
									<div class="gf">
										<div class="auto-gift padding-bt5 text-light">Your free gift will be added automatically at cart as per the offer.</div>
										<div class="padding-tp5 text-light">In case you would like to order this, call your Angara Advisor on</div>
										<div class="col-sm-12 no-padding text-light" style="margin-top:15px;">
											<span class="fontsize-type4"><a rel="nofollow" target="_new" href="/contact-us" class="text-light"><i class="fa fa-phone fa-fw text-light"></i>1-888-926-4272</a></span>
											<span class="text-light">&nbsp; or click &nbsp; <a rel="nofollow" id="_lpChatBtn" href='javascript:;' target='chat609151' onClick="javascript:window.open('https://server.iad.liveperson.net/hc/609151/?cmd=file&file=visitorWantsToChat&site=609151&imageUrl=https://server.iad.liveperson.nethttp://www.angara.comhttp://www.angara.com/store/images/lp/&referrer='+escape(document.location),'chat609151','width=475,height=400,resizable=yes');return false;" class="text-light live-chat-link"><i class="fa fa-comments fa-fw text-light"></i>Live Chat</a></span>
										</div>
										
										<div class="max-margin-top">
											<div class="add-to-cart">
												<button type="button" id="addtocart-btn" title="Continue" class="btn-cart add-to-cart btn-primary btn-block fontsize-type5 no-shadow" style="max-width:356px;"><i class="fa fa-shopping-cart low-padding-right"></i> Continue</button>
											</div>
											<?php 
											$refererHttpUrl = Mage::helper('core/http')->getHttpReferer();
											if($refererHttpUrl && stripos($refererHttpUrl, 'checkout/cart') !== false){
												$returnUrlHref = Mage::getUrl('checkout/cart/index/');
											}
											else{
												$returnUrlHref = Mage::getBaseUrl();
											}?>
											<script type="text/javascript">
											jQuery(function(){
												jQuery('#addtocart-btn').click(function(e){
													window.location.href = '<?php echo $returnUrlHref;?>';
													return false;
												})
											});
											</script>
										</div>
									</div>	
								<?php
								}?>
								
								<?php echo $this->getChildHtml('other');
								if($_product->isSaleable() && $this->hasOptions()):
									echo $this->getChildChildHtml('container1', '', true, true); 
								endif; ?>                
								<div class="product-collateral">
									<?php foreach($this->getChildGroup('detailed_info', 'getChildHtml') as $alias => $html):?>
										<div class="box-collateral <?php echo "box-{$alias}";?>">
											<?php if($title = $this->getChildData($alias, 'title')):?>
											<h2><?php echo $this->escapeHtml($title); ?></h2>
											<?php endif;
											echo $html; ?> 
										</div>
									<?php endforeach;						
									echo $this->getChildHtml('product_additional_data'); ?> 
								</div>
							</div>					
						</div>
						<div class="clearfix"></div>
						
						
						<div class="col-sm-12 no-padding add-ons pull-left">
							<?php
							$addOnClass		=	'';	
							$minPrice	=	Mage::helper('function')->minPriceToShowAddOns();
							if($_product->getPrice() < $minPrice){
								$addOnClass	=	'hidden';	
							}
							/* S: Add-ons Selection */
							if(!in_array(96, $this->getProduct()->getCategoryIds()) && (strtolower(substr($_product->getSku(), 0, 3)) != 'sd_') && !in_array($strLowerFreeProd, $freeProdSku)): 	/* excluding gift cards & free gifts */
								if(!($_product->getIsBuildYourOwn() && !$_product->getByoModel()->hasSettingSelected())):?>
                                <?php // if($this->canShowWarranty()){ ?>
									<div id="add-ons-panel-container" class="showcase-bg-white low-margin-top min-padding-bottom pull-left">
										<div class="h3 min-padding-bottom pull-left text-bold">Add-ons</div>
										<div id="add-ons-panel" class="pull-left no-padding">      
											<?php // S: Jewelry Appraisal ?>                                
                                        <?php if(Mage::helper('function')->canShowJAEngraving()){ ?>
											<div class="add-ons-item pull-left <?php echo $addOnClass;?>" id="jewelryAppraisalContainer">
												<div class="addons-item">
												<?php 
												$_options = $_product->getOptions();
												if($_options){
													foreach($_options as $_option){
														$optionArr[] = $_option->getTitle();
													}
												}
												
												if(in_array('Free Jewelry Appraisal',$optionArr) && (in_array(353, $this->getProduct()->getCategoryIds()) || in_array(457, $this->getProduct()->getCategoryIds()) || in_array(458, $this->getProduct()->getCategoryIds()))){?>                             
													<div class="cb-holder pull-left"><input id="appraisal0" name="appraisal0" type="checkbox" autocomplete="off" checked="checked" disabled="disabled"/></div>
													<div class="od-holder pull-left">
													<label for="appraisal0"><i class="fa fa-file-text-o fa-fw"></i><strong><?php echo '<span class="text-green">Free</span>'; ?></strong> Jewelry Appraisal</label> 
													<script type="text/javascript">
													jQuery(function(){
														if(jQuery('#appraisal0').is(":checked")){
															jQuery('dt label:contains("Jewelry Appraisal")').parent().next().find('input.product-custom-option').val('JA0050');
															addSelection("Appraisal");
															<?php 
															if(!$_product->IsConfigurable()){?>
																updateEstimateShipping();
															<?php 
															}?>	
														}
													});
													</script>                                               
												<?php 
												}
												else{?>
													<div class="cb-holder pull-left"><input id="appraisal" name="appraisal" type="checkbox" autocomplete="off" /></div>
													<div class="od-holder pull-left">
													<label for="appraisal"><i class="fa fa-file-text-o fa-fw"></i>Add Jewelry Appraisal For <strong class="apricot-text"><?php echo Mage::helper('function')->getJewelryAppraisalPrice(); ?></strong></label>
													<?php
												}?><i id="aa" class="fa fa-question-circle fa-fw text-lighter fontsize-type4 clickable" data-html="true" data-placement="right" data-trigger="click" data-toggle="tooltip" title="The jewelry appraisal document includes the details of the stone (carat, quality & grade) and other product specifications. It provides the documentation needed for customers to obtain  insurance for the item.  The appraisal is an advantage because it will reflect the  difference between the price offered by Angara and the market rates. All pieces of jewelry are only appraised by GIA certified gemologists. Jewelry appraisals provide customers  with a better understanding of what they purchased  and enhances confidence in the purchase."></i><small id="jewel-appraisal" class="text-red hidden nowrap block-display">*Jewelry Appraisal cost is non refundable.</small>
													</div>
												</div>
											</div>
                                            <?php } ?>
											<?php // E: Jewelry Appraisal 
										
											/* S: Insurance */ 
											if( $this->canShowWarranty() && !$_product->getIsBuildYourOwn() ){?>
												<div class="add-ons-item pull-left" id="warrantyContainer">
													<div class="addons-item">
														<div class="cb-holder pull-left"><input id="insurance" name="insurance" type="checkbox" autocomplete="off" /></div>
														<div class="od-holder pull-left">
															<label for="insurance"><i class="fa fa-file-text-o fa-fw"></i>Add Warranty For <strong class="dyn_warranty_price apricot-text"><?php echo (($_product->getPrice() < 200)? $this->helper('core')->currency(50,true,false): $this->helper('core')->currency($_product->getPrice() * .20,true,false)); ?></strong></label> 	<i id="aa" class="fa fa-question-circle fa-fw text-lighter fontsize-type4 clickable" data-html="true" data-placement="<?php if(strstr($_SERVER['HTTP_USER_AGENT'],'iPad')){ echo 'bottom'; }else{ echo 'right'; }?>" data-trigger="click" data-toggle="tooltip" title="The Jewelry Protection Warranty Plan protects your jewelry for the next 5 years against any accidental damage and/or wear and tear in order to ensure that your jewelry looks like new whenever you wear it. We offer FREE domestic round trip shipping for our Jewelry Protection Warranty Plan users. <a href='/total-protection-warranty' class='fontcolor-type1' target='_blank'>Click here</a> for more information."></i> 
														</div>
													</div>
												</div>
											<?php 
											} /* E: Insurance */ ?>     
										</div>
									</div>							
								<?php 
								endif;
							endif; 
							/* E: Add-ons Selection */ ?>
						</div>
					</form>
					<script>
						var setFormHeight;
						
						function closeDescription(){
							jQuery('.option-container').removeClass('on-it');
							jQuery('.customize-product-tab-content').find('.cs-option-details .option-details-container').removeAttr('style').addClass('hidden').removeClass('des-on-hover').find('.option-details-text.newCls').show().siblings('.option-details-text').hide();
						}
						
						jQuery(function(){
							//:RV - Auto scroll on page load
							var topHeight = jQuery('.top-quick-access').height();
							topHeight = topHeight + jQuery('.header-offer-holder').height();
							var scroll = jQuery(window).scrollTop();
							if(jQuery(window).width() > 1279){
								if(scroll <= topHeight){
									jQuery('html, body').animate({
									scrollTop: jQuery('#main-head').offset().top}, 1000);
								}
							}else{
								if(scroll <= topHeight){
									jQuery('html, body').animate({
									scrollTop: jQuery('#main-head').offset().top}, 1000);
								}
							}
							
							//S:RV set form height
							var frmHeight = jQuery('.product-form').height();
							var cntnrHeight = jQuery('.add-to-cart-container').height();
							var tHeight = 0;
							if(jQuery(window).width() <= 768){
								var tHeight = jQuery('.product-name-rating').height() + 10;
								jQuery('.add-to-cart-container').css('top',tHeight+'px');
							}
							if(frmHeight > cntnrHeight){
								var formHeight = frmHeight + tHeight + 20;
							}else{
								var formHeight = cntnrHeight + tHeight + 20;
							}
							jQuery('.product-form').css('min-height',formHeight+'px');
							jQuery('.product-page-usp.ipad').css('opacity','1');		
						//E:RV set form height
							
							//S:RV Customize option slider
							jQuery('.option-hldr').css('overflow','hidden');
							var showOptions = 4;
							var optionWidth = 0;
							jQuery('.customize-panel-container .customize-product-tab-content').each(function(){
								var cusOptionTitleHeight = 0;
								var optionsWidth = 0;
								var optionCount = parseInt(jQuery(this).find('.stone-holder-box .option-container').length);
								
								jQuery(this).find('.stone-holder-box').attr('data-option-count',optionCount);
								
								jQuery(this).find('.stone-holder-box .option-container').each(function(){
									optionWidth = jQuery(this).outerWidth();
									optionsWidth += optionWidth;
									var titleHeight = jQuery(this).find('.user-option-title').height();
									if(titleHeight > cusOptionTitleHeight){
										cusOptionTitleHeight = titleHeight;
									}
									//alert(optionWidth);
								});
								
								if(jQuery(window).width() <= 768){
									if(optionCount <= showOptions){
										var leftPos =  (optionCount * optionWidth) + 10;
									}else{
										var leftPos = jQuery(this).find('.option-hldr').width() + 10;
									}
									var topPos = 42;
								}else{
									if(optionCount <= showOptions){
										var leftPos = jQuery(this).find('.customize-btn-title').width() + (optionCount * optionWidth) + 10;
									}else{
										var leftPos = jQuery(this).find('.customize-btn-title').width() + jQuery('.option-hldr').width() + 10;
									}
									var topPos = 16;
								}
								
								if(optionCount > showOptions){
									jQuery(this)
										.append(jQuery('<div class="option-controller absolute-placeholder" data-pos="0" data-options="'+optionCount+'" data-show-options="'+showOptions+'">').css({'left':leftPos+'px','top':topPos+'px'})
											.append(jQuery('<a href="javascript:void(0)" class="cntrls co-next"><i class="fa fa-angle-right"></i></a>').click(function(){
												var a = parseInt(jQuery(this).parent('.option-controller').attr('data-options'));
												var b = parseInt(jQuery(this).parent('.option-controller').attr('data-show-options'));
												var c = parseInt(jQuery(this).parent('.option-controller').attr('data-pos'));
												if(a > b){
													var pos = c - 72;  //Slide Position
													jQuery(this).parent('.option-controller').attr('data-show-options',b+1).find('.co-prev').removeAttr('style');
													jQuery(this).parent('.option-controller').attr('data-pos',pos);
													jQuery(this).parents('.customize-product-tab-content').find('.stone-holder-box').animate({
														left:pos+'px'
													}, 200);
													
													a = parseInt(jQuery(this).parent('.option-controller').attr('data-options'));
													b = parseInt(jQuery(this).parent('.option-controller').attr('data-show-options'));
													if(a == b){
														jQuery(this).css({'pointer-events':'none','opacity':'0.5'});
													}
												}
											}))
											.append(jQuery('<a href="javascript:void(0)" class="cntrls co-prev" style="pointer-events:none; opacity:0.5"><i class="fa fa-angle-left"></i></a>').click(function(){
												var a = parseInt(jQuery(this).parent('.option-controller').attr('data-options'));
												var b = parseInt(jQuery(this).parent('.option-controller').attr('data-show-options'));
												var c = parseInt(jQuery(this).parent('.option-controller').attr('data-pos'));							
												if(b > showOptions){
													var pos = c + 72; //Slide Position
													jQuery(this).parent('.option-controller').attr('data-show-options',b-1).find('.co-next').removeAttr('style');
													jQuery(this).parent('.option-controller').attr('data-pos',pos);
													jQuery(this).parents('.customize-product-tab-content').find('.stone-holder-box').animate({
														left:pos+'px'
													}, 200);
													
													a = parseInt(jQuery(this).parent('.option-controller').attr('data-options'));
													b = parseInt(jQuery(this).parent('.option-controller').attr('data-show-options'));
													if(b == showOptions){
														jQuery(this).css({'pointer-events':'none','opacity':'0.5'});
													}
												}
											}))
										);
									
									jQuery(this).find('.co-next').trigger('click');
									leftPos = leftPos + 35;
								}
								jQuery(this).find('.stone-holder-box').css('width',optionsWidth+10+'px').find('.option-container').css('opacity','1');
								if(cusOptionTitleHeight > 20){
									jQuery(this).find('.option-hldr').css('height',(cusOptionTitleHeight + jQuery(this).find('.option-hldr').height() - 20)+'px');
								}
								
								//check if customize option text available or not
								var isText;
								jQuery(this).find('.cs-option-details .option-details-text').each(function(){
									var hasText = jQuery(this).html();
									if(hasText){
										isText = true;
									}else{
										isText = false;
									}
								});
								if(isText){
									//if available : add Question mark
									if(jQuery(window).width() <= 768){
										posTop = '64';
									}else if(jQuery(window).width() <= 1024){
										posTop = '38';
									}else{
										posTop = '20';
									}
									jQuery(this)
										.find('.cs-option-details').css({'position':'absolute', 'top':posTop+'px', 'left':leftPos+'px', 'cursor':'pointer', 'z-index':'3'})
										<?php // Don't remove this code 
										/* if(strstr($_SERVER['HTTP_USER_AGENT'],'iPad')){ ?>
										.append(
											jQuery('<i class="fa fa-question-circle">').click(function(){
												if(jQuery(this).parent('.cs-option-details').find('.option-details-container').hasClass('hidden')){
													jQuery('.cs-option-details').find('.option-details-container').addClass('hidden').removeClass('des-visible');
													jQuery(this).parent('.cs-option-details').find('.option-details-container').removeClass('hidden').addClass('des-visible');
												}else{
													jQuery(this).parent('.cs-option-details').find('.option-details-container').addClass('hidden').removeClass('des-visible');
												}
												
												var odcHeight = jQuery(this).parent('.cs-option-details').find('.option-details-container').height();
												jQuery(this).parent('.cs-option-details').find('.option-details-container').removeClass('des-on-hover').removeAttr('style').css('bottom','-'+(odcHeight/2)+'px');
											})
										)
										<?php } */ 
										// Don't remove this code ?>
										.find('.option-details-container')
										.append('<div class="dd-arrow">');
								}else{
									//Else : Remove detail box
									jQuery(this).find('.cs-option-details').remove();
								}
								
							});
							//E:RV Customize option slider
							
							
							//S:RV Set Hover on customize options
							<?php if(strstr($_SERVER['HTTP_USER_AGENT'],'iPad')){ ?>
								var onDescription = false;
								jQuery('.stone-holder-box .option-container')
									.on('touchend',function() {
										var ths = jQuery(this);
										if(ths.hasClass('on-it')){
											closeDescription();
										}else{
											closeDescription();
											onDescription = true;
											var index = ths.index();
											<?php if($_product->getIsBuildYourOwn()){ ?>
												var optionWidth = ths.outerWidth();
												if(index == 0){
													optionWidth += 10;
												}
											<?php } ?>
											var pos = index;
											var optionCount = parseInt(ths.parents('.stone-holder-box').attr('data-option-count'));
											var extraPix = 0;
											var	optionBoxPos = -(ths.parents('.stone-holder-box').position().left);
											var	arrowPos = 0;

											if(optionBoxPos > 0){
												pos -= optionBoxPos/72;
											}
											
											if(pos == 0){
												arrowPos = 24;
											}else if(pos == 1){
												arrowPos = 96;
											}else if(pos == 2){
												arrowPos = 168;
											}else if(pos == 3){
												arrowPos = 240;	
											}
											
											if(optionCount > showOptions){
												if(optionBoxPos < 0){
													arrowPos -= 72 * (optionCount - showOptions);
												}
												optionCount = showOptions;
												extraPix = 25;
											}
											
											var boxWidth = (optionWidth * optionCount) - 10;
											var boxPos = boxWidth + extraPix;
											

											setTimeout(function(){
												if(ths.parents('.customize-product-tab-content').find('.cs-option-details .option-details-container .option-details-text:eq('+index+')').html()){
													ths.addClass('on-it').parents('.customize-product-tab-content').find('.cs-option-details .option-details-container').css({'width':boxWidth+'px','left':'-'+(boxPos+20)+'px'}).removeClass('hidden').addClass('des-on-hover').find('.option-details-text:eq('+index+')').show().siblings('.option-details-text').hide();
												}
												ths.parents('.customize-product-tab-content').find('.cs-option-details .des-on-hover .dd-arrow').css('left',arrowPos + 'px');
											},100);
										}
									});
							<?php }else{ ?>
								var onDescription = false;
								var closeDescription = function(){
									jQuery('.option-container').removeClass('on-it');
									jQuery('.customize-product-tab-content').find('.cs-option-details .option-details-container').removeAttr('style').addClass('hidden').removeClass('des-on-hover').find('.option-details-text.newCls').show().siblings('.option-details-text').hide();
								}
								
								jQuery('.stone-holder-box .option-container')
									.mouseenter(function() {
										closeDescription();
										onDescription = true;
										
										var index = jQuery(this).index();
										<?php if($_product->getIsBuildYourOwn()){ ?>
											var optionWidth = jQuery(this).outerWidth();
											if(index == 0){
												optionWidth += 10;
											}
										<?php } ?>
										var pos = index;
										var optionCount = parseInt(jQuery(this).parents('.stone-holder-box').attr('data-option-count'));
										var extraPix = 0;
										var	optionBoxPos = -(jQuery(this).parents('.stone-holder-box').position().left);
										var	arrowPos = 0;
										
										if(optionBoxPos > 0){
											pos -= optionBoxPos/72;
										}
										if(pos == 0){
											arrowPos = 24;
										}else if(pos == 1){
											arrowPos = 96;
										}else if(pos == 2){
											arrowPos = 168;
										}else if(pos == 3){
											arrowPos = 240;	
										}
										
										if(optionCount > showOptions){
											if(optionBoxPos < 0){
												arrowPos -= 72 * (optionCount - showOptions);
											}
											optionCount = showOptions;
											extraPix = 25;
										}
										//alert(optionWidth+' - '+optionCount);
										var boxWidth = (optionWidth * optionCount) - 10;
										var boxPos = boxWidth + extraPix;
										
										if(jQuery(this).parents('.customize-product-tab-content').find('.cs-option-details .option-details-container .option-details-text:eq('+index+')').html()){
											jQuery(this).addClass('on-it').parents('.customize-product-tab-content').find('.cs-option-details .option-details-container').css({'width':boxWidth+'px','left':'-'+(boxPos+20)+'px'}).removeClass('hidden').addClass('des-on-hover').find('.option-details-text:eq('+index+')').show().siblings('.option-details-text').hide();
										}
										
										jQuery(this).parents('.customize-product-tab-content').find('.cs-option-details .des-on-hover .dd-arrow').css('left',arrowPos + 'px');
									})
									.mouseleave(function(){
										onDescription = false;
										jQuery('.option-details-container')
											.mouseenter(function(){
												onDescription = true;
											})
											.mouseleave(function(){
												onDescription = false;
												closeDescription();
											});
											
										setTimeout(function(){
											if(onDescription == false){
												closeDescription();								
											}
										},200);
									});
							<?php } ?>
							//E:RV Set Hover on customize options
						});
						
						jQuery(document).click(function(e){
							if (!jQuery(e.target).closest('.option-details-container').length && !jQuery(e.target).closest('.cs-option-details').length) {		//	find if we have a class
								<?php if(strstr($_SERVER['HTTP_USER_AGENT'],'iPad')){ ?>
									closeDescription();
								<?php } ?>
								jQuery('.cs-option-details').find('.option-details-container').addClass('hidden').removeClass('des-visible des-on-hover');
							}
						});
						
						
						jQuery(window).resize(function(){
							//S:RV set form height
							var frmHeight = jQuery('.product-form').height();
							var cntnrHeight = jQuery('.add-to-cart-container').height();
							if(frmHeight > cntnrHeight){
								var formHeight = frmHeight;
							}else{
								var formHeight = cntnrHeight;
							}
							jQuery('.product-form').css('min-height',formHeight+'px');
							jQuery('.product-page-usp.ipad').css('opacity','1');
							//E:RV set form height
							
							//S:RV Customize option slider on Window Resize
							var showOptions = 4;
							jQuery('.customize-panel-container .customize-product-tab-content').each(function(){
								var optionCount = jQuery(this).find('.stone-holder-box .option-container').length;
								
								jQuery(this).find('.stone-holder-box .option-container').each(function(){
									optionWidth = jQuery(this).outerWidth();
								});
								
								if(jQuery(window).width() <= 768){
									if(optionCount <= showOptions){
										var leftPos =  (optionCount * optionWidth) + 10;
									}else{
										var leftPos = jQuery(this).find('.option-hldr').width() + 10;
									}
									var topPosArrow = 42;
									var topPosDetail = 64;
								}else{
									if(optionCount <= showOptions){
										var leftPos = jQuery(this).find('.customize-btn-title').width() + (optionCount * optionWidth) + 10;
									}else{
										var leftPos = jQuery(this).find('.customize-btn-title').width() + jQuery('.option-hldr').width() + 10;
									}
									var topPosArrow = 20;
									var topPosDetail = 38;
								}
								jQuery(this).find('.option-controller').css({'left':leftPos+'px','top':topPosArrow+'px'});
								if(optionCount > showOptions){
									leftPos += 35;
								}
								jQuery(this).find('.cs-option-details').css({'left':leftPos+'px','top':topPosDetail+'px'});
							});
							//E:RV Customize option slider on Window Resize
							
						});
					</script>
					<div class="clearfix"></div>
					<div class="product-page-usp ipad text-left full-width max-low-padding-top">
						<div class="usp-near-add-to-cart fontsize-type3">
							<div class="col-sm-4 no-padding">
								<span data-html="true" data-placement="top" data-trigger="hover" data-toggle="tooltip" title="Free Shipping and Free Return Shipping within the USA.">
									<img alt="Free Shipping Worldwide" style="margin-top:-4px" width="20" src="/skin/frontend/ress/default/images/freeshipping.png">
									<span style="display:inline-block">Free Shipping</span>
								</span>

							</div>
							<div class="col-sm-4 no-padding">
								<span data-html="true" data-placement="top" data-trigger="hover" data-toggle="tooltip" title="If you don't like the product, simply send it back to us within <?php echo Mage::helper('function')->freeReturnDays();?> days and get a 100% refund. We will even email you a FREE return shipping label (for domestic orders).">	
									<img alt="<?php echo Mage::helper('function')->freeReturnDays();?> Day Return" style="margin-top:-4px" width="20" src="/skin/frontend/ress/default/images/30dayreturn.png">
									<span style="display:inline-block">Free <?php echo Mage::helper('function')->freeReturnDays();?> Day Return</span>
								</span>
							</div>
							<div class="col-sm-4 no-padding">
								<span data-html="true" data-placement="top" data-trigger="hover" data-toggle="tooltip" title="We will refund up to 110% of the purchase price, if any accredited jewelry appraiser values your piece for less than 125% of the purchase price.">
									<img alt="110% Refund Policy" style="margin-top:-4px" width="20" src="/skin/frontend/ress/default/images/110refund.png">
									<span style="display:inline-block">110% Refund Policy</span>
								</span>
							</div>
						</div>
					</div>

					<div class="clearfix"></div>
					<?php if(!$_product->getIsBuildYourOwn() && !in_array($strLowerFreeProd, $freeProdSku)){ ?>
						<div class="similar-items">
							<div class="relative-placeholder">
								<?php //S: Code for add Default category link
								$current_cat=Mage::getModel('catalog/layer')->getCurrentCategory(); ?>
								<?php if($current_cat && $current_cat->getId()){ ?>
									<a href="<?php echo $current_cat->getUrl(); ?>" class="absolute-placeholder apricot-text" style="font-size:16px; top:5px; right:25px; z-index:1">View all <?php echo $current_cat->getName(); ?></a>
								<?php } ?>
								
								<div id="similarItemsAjax-4" class="col-sm-12 no-padding similarItems">
									<?php echo $this->getChildHtml('related_products'); ?>
								</div>
							</div>
						</div>
						<div class="clearfix"></div>
					<?php } ?>

					<div class="col-sm-12 no-padding">
						<div class="">
							<div id="recently-viewed-jewelry-container"></div>
						</div>
					</div>
					<div class="clearfix"></div>

					<div class="col-md-12 col-sm-12 no-padding low-margin-top <?php if($_product->getIsBuildYourOwn() && $_product->getByoModel()->hasSettingSelected()){?>hidden<?php } ?>">
						<?php /*S: Tabs of Product Details || Customer Review || Shipping & Returns || Angara Difference */ ?>
						<div id="product-extra-info-tabs" class="high-padding-top ress-nav"> 
							<div class="pro-detail">
								<div class="">
									<div class="col-xs-12 no-padding full-width">
										<div id="product-details-tab" class="product-tab-content full-width ress-nav-content show fontsize-type1">
											<h2 class="title-head max-margin-bottom">Product Specifications of <span class=" dyn_short_description"><?php echo $_helper->productAttribute($_product,$_product->getShortDescription(),'name');?></span></h2>
											<?php echo $this->getChildHtml('description'); ?>
										</div>
									</div>
									<div class="clearfix"></div>
									
									<div class="col-xs-12 no-padding">
										<div id="customer-reviews-tab" class="product-tab-content full-width ress-nav-content fontsize-type1">
											<h2 class="title-head" style="margin-bottom:0px;"> Reviews of <span class=" dyn_short_description"><?php echo $_helper->productAttribute($_product,$_product->getShortDescription(),'name');?></span> <?php echo $this->getReviewsSummaryHtml($_product, 'short'); ?></h2>
											<div class="customer-review-list custom-scroll max-padding-left max-padding-right" onScroll="javascript:void(0);">
												<?php echo $this->getChildHtml('reviews'); ?>
											</div>
										</div>
									</div>
									<div class="clearfix"></div>
									
									<?php if(!in_array($strLowerFreeProd, $freeProdSku)){ ?>
									<div class="col-xs-12 no-padding full-width">
										<div id="angara-difference-tab" class="product-tab-content full-width ress-nav-content fontsize-type1">
											<h2 class="title-head max-margin-bottom">The Angara Difference</h2>
											<div class="custom-made col-sm-12 max-margin-bottom max-margin-top">
												<div class="col-sm-2">
													<img class="img-responsive" src="/skin/frontend/ress/default/images/pp/custom-made.svg" style="margin:0 auto; max-width:100px;" />
												</div>
												<div class="col-sm-10">
													<p class="title">Custom Made, Just For You:</p>
													<p>Our master jewelers start producing your made-to-order custom jewelry piece after you place your order.  We hand select every gemstone and diamond that will be a part of your order and work 24/7 to ensure that your jewelry piece is made of the highest quality.  Most custom pieces are ready to ship within 24-48 business hours.</p>
												</div>
											</div>
											<div class="clearfix"></div>
											<div class="col-sm-12 max-margin-top max-margin-bottom relative-placeholder">
												<div class="col-sm-6 no-padding absolute-placeholder seprator-bdr"></div>
												<div class="col-sm-6 max-margin-bottom max-margin-top">
													<div class="col-sm-3">
														<img class="img-responsive" src="/skin/frontend/ress/default/images/pp/shipping-and-return.svg" style="margin:0 auto; max-width:100px;" />
													</div>
													<div class="col-sm-8">
														<p class="title">Free Shipping:</p>
														<p>We offer FREE ground shipping within the USA. All international orders over US $500 are also shipped for FREE. Upgraded shipping options can be availed for nominal fees. <a href="/shipping" target="_blank">Read More</a></p>
													</div>
												</div>
												<div class="col-sm-6 row-reverse max-margin-bottom max-margin-top">
													<div class="col-sm-8 col-sm-offset-1">
														<p class="title">Free Returns:</p>
														<p>If you arent 100% satisfied with your purchase, you can return it for a full refund or exchange it within 30 days of the shipping date. Simply fill the online return form to request for a return shipping label. <a href="/return-policy" target="_blank">Read More</a></p>
													</div>
													<div class="col-sm-3">
														<img class="img-responsive" src="/skin/frontend/ress/default/images/pp/free-return.svg" style="margin:0 auto; max-width:100px;" />
													</div>
												</div>
												<div class="clearfix"></div>
												<div class="col-sm-6 max-margin-bottom max-margin-top">
													<div class="col-sm-3">
														<img class="img-responsive" src="/skin/frontend/ress/default/images/pp/internet-family-jeweler.svg" style="margin:0 auto; max-width:100px;" />
													</div>
													<div class="col-sm-8">
														<p class="title">The Internet's Family Jeweler:</p>
														<p>We are family owned and have been in the gemstone business for 3 generations. Just like a traditional family jeweler, we will work with you to find or create the jewelry piece of your dreams.</p>
													</div>
												</div>
												<div class="col-sm-6 row-reverse max-margin-bottom max-margin-top">
													<div class="col-sm-8 col-sm-offset-1">
														<p class="title">Exceptional Value And Quality, Guaranteed By A 110% Refund Policy:</p>
														<p>If any accredited jewelry appraiser values the piece for less than 125% of the purchase price or states that the craftsmanship is not exceptional, well give you a 110% refund (up to $250).</p>
													</div>
													<div class="col-sm-3">
														<img class="img-responsive" src="/skin/frontend/ress/default/images/pp/110-refund.svg" style="margin:0 auto; max-width:100px;" />
													</div>
												</div>
												<div class="clearfix"></div>
												<div class="col-sm-6 max-margin-bottom max-margin-top">
													<div class="col-sm-3">
															<img class="img-responsive" src="/skin/frontend/ress/default/images/pp/direct-from-the-source.svg" style="margin:0 auto; max-width:100px;" />
													</div>
													<div class="col-sm-8">
														<p class="title">Direct From The Source:</p>
														<p>We source the best quality gemstones directly from the mines and manufacturers. We also manufacture the large majority of our gemstone jewelry. This enables us to cut out all middlemen and offer unparalleled prices. </p>
													</div>
												</div>
												<div class="col-sm-6 row-reverse max-margin-bottom max-margin-top">
													<div class="col-sm-8 col-sm-offset-1">
														<p class="title">Higher Quality:</p>
														<p>Our focus is on maximizing beauty rather than saving gold or gemstone weight by reducing quality. Even if this philosophy and commitment to fine jewelry costs us more, we believe in providing maximum customer satisfaction.</p>
													</div>
													<div class="col-sm-3">
														<img class="img-responsive" src="/skin/frontend/ress/default/images/pp/higher-quality.svg" style="margin:0 auto; max-width:100px;" />
													</div>
												</div>
												<div class="clearfix"></div>
												<div class="col-sm-6 max-margin-bottom max-margin-top">
													<div class="col-sm-3">
														<img class="img-responsive" src="/skin/frontend/ress/default/images/pp/30days-money-back.svg" style="margin:0 auto; max-width:100px;" />
													</div>
													<div class="col-sm-8">
														<p class="title"><?php echo Mage::helper('function')->freeReturnDays();?>-Day Money Back Guarantee:</p>
														<p>If you don't love it, simply send it back in its original condition for a full refund.</p>
													</div>
												</div>
												<div class="col-sm-6 row-reverse max-margin-bottom max-margin-top">
													<div class="col-sm-8 col-sm-offset-1">
														<p class="title">100% Conflict Free:</p>
														<p>All our diamonds are conflict free and are untouched by any kind of human exploitation.</p>
													</div>
													<div class="col-sm-3">
														<img class="img-responsive" src="/skin/frontend/ress/default/images/pp/conflict-free.svg" style="margin:0 auto; max-width:100px;" />
													</div>
												</div>
												<div class="clearfix"></div>
											</div>
										</div>
									</div>
									<?php } ?>
								</div>	
							</div>	
						</div>
						<?php /*E: Tabs of Product Details || Customer Review || Shipping & Returns || Angara Difference */ ?>
					</div>

				</div>	
			</div>   	
</div>

<script language="javascript">
if(typeof(s)!='undefined')
	s.t();

jQuery(function(){
	if(jQuery(window).width() <= 768){
		jQuery('#angara-difference-tab').find('.col-sm-8').addClass('col-sm-9').removeClass('col-sm-8 col-sm-offset-1');
	}
});
</script>

<?php if($_product->getIsBuildYourOwn()){ ?>
	<script>
	jQuery(function(){
		var img = jQuery('#moreviews ul li:eq(0) img').attr('src');
		jQuery('#settingImg img').attr('src',img);
	});
	</script>
<?php } ?>

<style> 
@media (min-width: 768px ) and (max-width: 999px) {.ipad-rules{bottom: 2px !important; left: 105px !important;}} 
</style>
<?php	//	Code added by Vaseem for bt 766 to disable ipad promotion
$todaysCouponCode	=	strtolower(Mage::helper('function')->getTodaysCouponCode());
$iPadImage		=	'/skin/frontend/ress/default/images/special-price-offer-banner-sm-new.jpg';
$desktopImage	=	'/skin/frontend/ress/default/images/special-price-offer-banner-md-new.jpg';

$skuArray	=	Mage::helper('function')->getSkuFromCoupon();
if(is_array($skuArray) && in_array($_product->getSku(), $skuArray)){
	$offerSku		=	1;
	$iPadImage		=	'/skin/frontend/ress/default/images/special-price-offer-banner-sm-'.$todaysCouponCode.'.jpg';
	$desktopImage	=	'/skin/frontend/ress/default/images/special-price-offer-banner-md-'.$todaysCouponCode.'.jpg';
}
    
    
$ipadStatus		=	Mage::helper('function')->iPadPromotionStatus(); 
if ($ipadStatus) { 
	$class= 'hidden';
	if($_product->getFinalPrice()>2500 || $offerSku==1){
		$class= '';
	}
	?>
	
	<?php if($offerSku == 1){ ?>
		<div class="clickable deactive <?php echo $class; ?>" id="exclusive-offer-footer-opener-new" style="padding:10px 20px; position:fixed; bottom:0px; right:20px; background-color:#fa505a; color:#ffffff; transition:all 0.1s ease-in-out; -webkit-transition:all 0.2s ease-in-out; z-index:2; border-radius:2px 2px 0px 0px;">
		<span class="pull-left" style="font-size:16px;">Special Holiday Deal Of The Day - <strong>20% Off</strong></span> 
		<span class="pull-left high-margin-left"><i class="fa fa-fw fa-angle-up min-padding-left valign-middle" style="font-size:15px;"></i></span>
	</div>
	<?php }else{ ?>
		<div class="clickable deactive <?php echo $class; ?>" id="exclusive-offer-footer-opener-new" style="padding:10px; position:fixed; bottom:0px; right:20px; background-color:#fa505a; color:#ffffff; transition:all 0.1s ease-in-out; -webkit-transition:all 0.2s ease-in-out; z-index:2; border-radius:2px 2px 0px 0px;">
			<span class="pull-left">We Upgraded Your Offer</span> 
			<?php if(strstr($_SERVER['HTTP_USER_AGENT'],'iPad')){ ?>
				<span class="pull-left high-margin-left"><i class="fa fa-fw fa-angle-up min-padding-left valign-middle" style="font-size:12px;"></i></span>
			<?php }else{ ?>
				<span class="pull-left high-margin-left">Know More <i class="fa fa-fw fa-angle-up min-padding-left valign-middle" style="font-size:12px;"></i></span>
			<?php } ?>
		</div>
	<?php } ?>
	
	<div class="" id="exclusive-offer-footer-offer-new" style="position:fixed; left:0px; right:0px; bottom:-100%; color:#ffffff; transition:all 0.2s ease-in-out; -webkit-transition:all 0.2s ease-in-out; z-index:2;">
		<?php /* Ticker Start */
				$tickerHtml		=	Mage::helper('function')->getOfferCatalogTickerHtml();
				if($tickerHtml && $offerSku == 1){ ?>
						<style>
						.tickr-width{width:100%; position:absolute; float:left; top:21%; left:0px; right:0px;}
						.tickr-holder{}
						.tickr-style{
							font-weight: bold;
							font-size: 15px;
							position: absolute;
							right: 14%;
							margin-top: 4px;
							color: #000000;
							background:transparent;
							text-align: center;
							width: 186px;
							margin-left: -93px;
							transform:scale(1.5);
							-webkit-transform:scale(1.5);
							-moz-transform:scale(1.5);
						}
						.ofrend, .text-format {display:block; padding: 0px 0px 0px;}
						.ofrend, .text-format, .text-format + span  {width:100%; float:left}
						.ofrend{font-size: 18px; font-weight: normal; display:none; /* position: absolute; left: -170px; top: 11px; */}
						.daydigits{display:none;}
						.hourdigits, .minutedegites, .secondigits{
							height: 40px;
							width: 50px;
							display: inline-block;
							text-align: center;
							line-height: 40px;
							color: #ffffff;
							background: #000000;
							font-size: 35px;
							font-weight: normal;
						}
						.text-format span{float:left}
						span.daydigits + span { display: none;}
						span.hourdigits + span, span.minutedegites + span{width: 18px; display: block; float: left; font-size: 28px; line-height: 40px;} 
						.text-format + span span{width:50px; float:left; margin-right:18px; font-weight:300; font-size:8px;}
						.text-format + span span:last-child{margin-right:0px;}
						
						@media(max-width:1680px){.tickr-width{top:15%;}}
						@media(max-width:1600px){}
						@media(max-width:1500px){.tickr-style{transform: scale(1.1);  -webkit-transform: scale(1.1);  -moz-transform: scale(1.1);}}
						@media(max-width:1440px){}
						@media(max-width:1368px){.tickr-width{top:8%;}}
						@media(max-width:1280px){.tickr-style{transform: scale(1.0);  -webkit-transform: scale(1.0);  -moz-transform: scale(1.0);}}
						@media(max-width:1155px){.tickr-style{transform: scale(0.9);  -webkit-transform: scale(0.9);  -moz-transform: scale(0.9); right:8%;} .tickr-width{top:-6%;}}
						<?php if(strstr($_SERVER['HTTP_USER_AGENT'],'iPad')){ ?>
							@media(max-width:1024px){.tickr-style{transform: scale(1.2);  -webkit-transform: scale(1.2);  -moz-transform: scale(1.2); right:5%;} .tickr-width{top:20%;}}
							@media(max-width:768px){.tickr-style{transform: scale(1.0);  -webkit-transform: scale(1.0);  -moz-transform: scale(1.0); right:3%;} .tickr-width{top:10%;}}
						<?php } ?>
						
						</style>
						<script type="text/javascript" src="<?php echo Mage::getBaseUrl(Mage_Core_Model_Store::URL_TYPE_SKIN);?>frontend/ress/default/js/countdown-timer.js"></script>
							<div class="product-page-ticker fl full-width">
								<?php echo $tickerHtml; ?>
							</div>
							<script>
								jQuery(window).load(function(){
									jQuery('.ofrend').show().text("Today's Deal Ends In");
								})
							</script>
				<?php 
				}
		/* Ticker Ends */ ?>
        <?php	if(strstr($_SERVER['HTTP_USER_AGENT'],'iPad')){ ?>
			<img src="<?php echo $iPadImage;?>" style="margin:0 auto;" class="img-responsive">
		<?php }else{ ?>
			<img src="<?php echo $desktopImage;?>" style="margin:0 auto;" class="img-responsive">
		<?php } ?>
	</div>
	<script>
		jQuery(function(){
			jQuery('#exclusive-offer-footer-opener-new').on('click',function(){
				if(jQuery('#exclusive-offer-footer-opener-new').hasClass('deactive')){
					openProductOffer();
				}else{
					closeProductOffer();
				}
				jQuery('#exclusive-offer-footer-opener-new i').toggleClass('fa-angle-up fa-angle-down');
			});
		});
		jQuery(window).resize(function(){
			var h = jQuery('#exclusive-offer-footer-offer-new img').height();
			if(jQuery('#exclusive-offer-footer-opener-new').hasClass('active')){
				jQuery('#exclusive-offer-footer-opener-new').css({'bottom':h+'px'});
			}
		});
		jQuery(window).load(function(){
			<?php if($_product->getFinalPrice()>2500 || $offerSku==1 ){ ?>
				openProductOffer();
				<?php if($offerSku==1){ ?>
					setTimeout(function(){
						if(jQuery('#exclusive-offer-footer-opener-new').hasClass('active')){
							closeProductOffer();
							jQuery('#exclusive-offer-footer-opener-new').addClass('first-time');
						}
					}, 10000);
				<?php }else{ ?>
					setTimeout(function(){
						if(jQuery('#exclusive-offer-footer-opener-new').hasClass('active')){
							closeProductOffer();
							jQuery('#exclusive-offer-footer-opener-new').addClass('first-time');
						}
					}, 5000);
				<?php } ?>
			<?php }else{ ?>
				closeProductOffer();
				jQuery('#exclusive-offer-footer-opener-new').addClass('first-time');
			<?php } ?>
		}); 
	</script>
<?php } ?>
<?php
	$appraisal = $this->getRequest()->getParam('appraisal',false);
	$appraisal = (boolean)$appraisal;
	$insurance = $this->getRequest()->getParam('insurance',false);
	$insurance = (boolean)$insurance;
?>
<script>
	jQuery(function(){
		<?php if($appraisal){ ?>
			jQuery('#appraisal').prop('checked',true);
		<?php } ?>
		<?php if($insurance){ ?>
			jQuery('#insurance').prop('checked',true);
		<?php } ?>
	});
</script>
<?php //S: Share Email ?>
<style>
	.send-friend{ background: #ffffff; position: absolute;width:500px;height:80%;left:0; right:0;margin:5% auto;border-radius: 3px;padding-bottom:25px;}
	.send-friend .page-title{ margin-top:35px; }
	.send-friend .page-title h1{ font-size: 20px; color: #414b56; text-align:center;}
	.send-friend h2{ font-size:18px; margin-bottom: 0px;  text-align:center;}
	.send-friend label{ width: 100%; display: block; padding-bottom: 3px; text-align: left; }
	.send-friend label em{ color:red; padding-right:3px; } 
	.send-friend .validation-advice{ text-align:left; } 
	.send-friend input[type="text"], .send-friend input[type="email"]{ height: 35px; border: 1px solid #dedede; width: 100%; margin-top: 20px; padding-left: 20px; font-size: 14px; -webkit-appearance: none; box-sizing:border-box; border-radius: 1px; } 
	.send-friend textarea{ width: 100%; resize: vertical; margin-top: 20px; margin-bottom: 0px; border: 1px solid #dedede; border-radius: 1px; font-size: 14px; padding-left: 20px; padding-top: 10px; box-sizing: border-box; } 
	.send-friend button{ width:100%; margin-top: 20px; border:none; background:#fa505a; border-radius:1px; font-size:20px; line-height:50px; color:#ffffff; }
	.send-friend .buttons-set{position:relative;}
	#send-friend-message .sf-text {display: table-cell;vertical-align: middle;}
	#share-email-wait{color: #ffffff; top: 38px; right: 90px;}
	@media (max-width:768px){
		#share-email-wait{right: 215px;}
		.send-friend{width:100%;height:100%;margin:0px;}
		.close-popup {top:8px !important;right:8px !important;}
	}
</style>
<div class="modal fade" id="emailModal" tabindex="-1" role="dialog" aria-hidden="true" data-clear-on-close="1"></div>
<script type="text/javascript">
	jQuery(function(){
		jQuery(window).load(function() {
			jQuery("#emailModal").html('<div class="loading-indicator hide text-center"><div class="modal-backdrop fade in"></div><div class="loader fa fa-spinner fa-spin fa-5x max-margin-top"></div></div>');
		});
	});
</script>
<?php //E: Share Email ?>